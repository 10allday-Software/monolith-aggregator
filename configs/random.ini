[monolith]
timeout = 10
batch_size = 100
sequence = extract, load
history = sqlite:///%(here)s/../history.db

[phase:extract]
sources = random
targets = sql

[phase:load]
sources = sql
targets = es

[source:random]
id = rand
use = monolith.aggregator.plugins.randomizer.RandomGenerator

[target:sql]
id = sql
use = monolith.aggregator.plugins.sqlwrite.SQLInjecter
database = sqlite:///%(here)s/../monolith.db

[source:sql]
id = sql
use = monolith.aggregator.plugins.sqlread.SQLRead
database = sqlite:///%(here)s/../monolith.db
query = select id AS _id, type AS _type, date, value from record where date BETWEEN :start_date and :end_date
json_fields = value

[target:es]
id = es
use = monolith.aggregator.plugins.es.ESWrite
url = http://localhost:9200
