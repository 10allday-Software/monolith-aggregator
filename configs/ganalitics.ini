[monolith]
timeout = 10
batch_size = 100
sequence = extract, load

[phase:extract]
sources = ga, ga2
targets = sql, stdout

[phase:load]
sources = sql
targets = es, stdout

[source:ga]
id = ga-pageviews
use = aggregator.plugins.ganalytics.GoogleAnalytics
metrics = ga:pageviews
dimensions = browser
oauth_token = %(here)s/auth.json
domain = marketplace.firefox.com

[source:ga2]
id = ga-visitors
use = aggregator.plugins.ganalytics.GoogleAnalytics
metrics = ga:visitors
dimensions = browser
oauth_token = %(here)s/auth.json
domain = marketplace.firefox.com

[target:sql]
id = sql
use = aggregator.plugins.sqlwrite.SQLInjecter
database = mysql+pymysql://monolith:monolith@localhost/monolith

[source:sql]
id = sql
use = aggregator.plugins.sqlread.SQLRead
database = pymysql://monolith:monolith@localhost/monolith
query = select * from record where date BETWEEN :start_date and :end_date

[target:es]
id = es
use = aggregator.plugins.es.ESWrite
url = http://localhost:9200

[target:stdout]
id = stdout
use = aggregator.plugins.std.Out
